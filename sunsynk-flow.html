<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunsynk Power Flow - Pure SVG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0f172a;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
        }

        .card {
            background: var(--ha-card-background, #1e293b);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            padding: 10px;
            max-width: 500px;
            width: 100%;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Sunsynk default styles from source */
        text {
            text-anchor: middle;
            dominant-baseline: middle;
        }

        .left-align {
            text-anchor: start;
        }

        .right-align {
            text-anchor: end;
        }

        .st1 {
            fill: #ff9b30;
        }

        /* Solar color */
        .st2 {
            fill: #f3b3ca;
        }

        .st3 {
            font-size: 9px;
        }

        .st4 {
            font-size: 14px;
        }

        .st5 {
            fill: #969696;
        }

        .st6 {
            fill: #5fb6ad;
        }

        /* Battery color */
        .st7 {
            fill: #5490c2;
        }

        /* Grid color */
        .st8 {
            font-weight: 500;
        }

        .st9 {
            fill: #959595;
        }

        .st10 {
            font-size: 16px;
        }

        .st11 {
            fill: transparent;
        }

        .st12 {
            display: none;
        }

        .st13 {
            font-size: 22px;
        }

        .st14 {
            font-size: 12px;
        }

        /* Flow animation */
        @keyframes flowDots {
            0% {
                stroke-dashoffset: 24;
            }

            100% {
                stroke-dashoffset: 0;
            }
        }

        .flow-line {
            stroke-dasharray: 4, 4;
            animation: flowDots 1s linear infinite;
        }

        .flow-line-reverse {
            stroke-dasharray: 4, 4;
            animation: flowDots 1s linear infinite reverse;
        }

        /* Colors */
        :root {
            --solar-color: #ff9b30;
            --battery-color: #5fb6ad;
            --grid-color: #5490c2;
            --load-color: #5fb6ad;
            --inverter-color: #6b7280;
        }
    </style>
</head>

<body>
    <div class="card">
        <div class="container">
            <svg viewBox="0 0 483 405" preserveAspectRatio="xMidYMid meet" width="100%"
                xmlns="http://www.w3.org/2000/svg">

                <!-- ===================== SOLAR SECTION ===================== -->
                <svg id="Solar" style="overflow: visible" x="3%" y="2.5%">
                    <!-- Sun Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" id="sun" x="0" y="-0.5" width="40" height="40"
                        viewBox="0 0 24 24">
                        <path fill="#ff9b30"
                            d="M11.45 2v3.55L15 3.77L11.45 2m-1 6L8 10.46l3.75 1.25L10.45 8M2 11.45L3.77 15l1.78-3.55H2M10 2H2v8c.57.17 1.17.25 1.77.25c3.58.01 6.49-2.9 6.5-6.5c-.01-.59-.1-1.18-.27-1.75m7 20v-6h-3l5-9v6h3l-5 9Z" />
                    </svg>

                    <!-- PV Total Box -->
                    <rect x="51" y="162" width="70" height="30" rx="4.5" ry="4.5" fill="none" stroke="#ff9b30"
                        stroke-width="1" />

                    <!-- PV1 Box -->
                    <rect x="0" y="40" width="70" height="30" rx="4.5" ry="4.5" fill="none" stroke="#ff9b30"
                        stroke-width="1" />
                    <!-- PV2 Box -->
                    <rect x="101" y="40" width="70" height="30" rx="4.5" ry="4.5" fill="none" stroke="#ff9b30"
                        stroke-width="1" />

                    <!-- PV Names -->
                    <text x="0" y="78.5" class="st3 st8 left-align" fill="#ff9b30">PV1</text>
                    <text x="99" y="78.5" class="st3 st8 left-align" fill="#ff9b30">PV2</text>

                    <!-- PV1 Power -->
                    <text id="pv1-power-svg" x="36.5" y="56.5" class="st14 st8" fill="#ff9b30">1250 W</text>
                    <!-- PV2 Power -->
                    <text id="pv2-power-svg" x="137" y="56.5" class="st14 st8" fill="#ff9b30">1180 W</text>

                    <!-- PV Total Power -->
                    <text id="pv-total-svg" x="87" y="178" class="st14 st8" fill="#ff9b30">2430 W</text>

                    <!-- Daily Solar Label -->
                    <text x="43.5" y="29" class="st3 left-align" fill="#ff9b30">Daily Solar</text>
                    <text id="daily-solar-svg" x="43.5" y="15" class="st10 left-align" fill="#ff9b30">8.5 kWh</text>

                    <!-- PV1 -> Total Flow Line -->
                    <path d="M 86 162 L 86 56 Q 86 56 86 56 L 70 56" fill="none" stroke="#ff9b30" stroke-width="2"
                        class="flow-line" />
                    <!-- PV2 -> Total Flow Line -->
                    <path d="M 86 162 L 86 56 Q 86 56 86 56 L 101 56" fill="none" stroke="#ff9b30" stroke-width="2"
                        class="flow-line" />
                    <!-- Total PV -> Inverter Flow Line -->
                    <path d="M 155 250 L 96 250 Q 86 250 86 240 L 86 192" fill="none" stroke="#ff9b30" stroke-width="3"
                        class="flow-line" />
                </svg>

                <!-- ===================== INVERTER SECTION ===================== -->
                <svg id="Inverter" style="overflow: visible" x="3%" y="2.5%">
                    <!-- Inverter Box -->
                    <rect x="145.15" y="162" width="70" height="50" rx="7.5" ry="7.5" fill="none" stroke="#6b7280"
                        stroke-width="1.5" />

                    <!-- Inverter Power -->
                    <text id="inverter-power-svg" x="180.5" y="178" class="st14 st8" fill="#6b7280">2380 W</text>
                    <!-- Inverter Current -->
                    <text id="inverter-current-svg" x="180.5" y="199" class="st14 st8" fill="#6b7280">10.5 A</text>

                    <!-- Inverter Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" x="154.5" y="224.75" width="54" height="79"
                        viewBox="0 0 74 91" preserveAspectRatio="xMidYMid meet">
                        <g transform="translate(0.000000,91.000000) scale(0.100000,-0.100000)" fill="#6b7280"
                            stroke="none">
                            <path
                                d="M35 887 l-27 -23 0 -404 0 -404 27 -23 c26 -23 28 -23 329 -23 284 0 305 1 327 19 l24 19 0 412 0 412 -24 19 c-22 18 -43 19 -327 19 -301 0 -303 0 -329 -23z m585 -157 l0 -80 -255 0 -255 0 0 80 0 80 255 0 255 0 0 -80z m-242 -229 c44 -34 40 -46 -14 -46 -60 0 -97 -38 -93 -94 5 -64 -23 -80 -35 -20 -9 44 24 113 63 134 35 18 34 15 21 50 -11 29 -14 30 58 -24z m110 -129 c4 -51 -19 -97 -59 -117 -27 -14 -30 -20 -23 -48 l6 -31 -51 43 c-29 24 -49 46 -46 49 3 4 23 5 44 3 58 -4 95 32 97 95 3 60 1 57 17 52 6 -3 13 -23 15 -46z" />
                        </g>
                    </svg>

                    <!-- Inverter -> Load path -->
                    <path d="M 180 212 L 180 235" fill="none" stroke="#6b7280" stroke-width="2" />

                    <!-- Status Circle -->
                    <circle id="standby" cx="160" cy="304" r="3.5" fill="#22c55e" />
                    <text x="167" y="306" class="st3 left-align" fill="#6b7280">Normal</text>

                    <!-- Autarky & Ratio -->
                    <text id="autarky-svg" x="212" y="283" class="st4 st8 left-align" fill="#6b7280">85%</text>
                    <text x="212" y="295" class="st3 left-align" fill="#6b7280">Autarky</text>
                    <text id="ratio-svg" x="256" y="283" class="st4 st8 left-align" fill="#6b7280">92%</text>
                    <text x="256" y="295" class="st3 left-align" fill="#6b7280">Ratio</text>
                </svg>

                <!-- ===================== BATTERY SECTION ===================== -->
                <svg id="Battery" style="overflow: visible" x="3%" y="2.5%">
                    <!-- Battery Icon with gradient -->
                    <defs>
                        <linearGradient id="batteryGradient" x1="0%" x2="0%" y1="100%" y2="0%">
                            <stop offset="0%" stop-color="#5fb6ad" />
                            <stop offset="100%" stop-color="#5fb6ad" />
                        </linearGradient>
                    </defs>

                    <svg xmlns="http://www.w3.org/2000/svg" id="bat" x="74.5" y="296.25" width="82" height="82"
                        preserveAspectRatio="none" viewBox="0 0 24 24">
                        <!-- Battery 70% icon -->
                        <path fill="url(#batteryGradient)"
                            d="M16 20H8V6h8m.67-2H15V2H9v2H7.33A1.33 1.33 0 0 0 6 5.33v15.34C6 21.4 6.6 22 7.33 22h9.34c.74 0 1.33-.6 1.33-1.33V5.33C18 4.6 17.4 4 16.67 4M15 16H9v2h6v-2m0-4H9v2h6v-2m0-4H9v2h6V8Z" />
                    </svg>

                    <!-- Battery SOC -->
                    <text id="battery-soc-svg" x="132.5" y="333" class="st13 st8 left-align" fill="#5fb6ad">70%</text>

                    <!-- Battery Power -->
                    <rect x="86" y="265" width="70" height="30" rx="4.5" ry="4.5" fill="none" stroke="#5fb6ad" />
                    <text id="battery-power-svg" x="120" y="282" class="st14 st8" fill="#5fb6ad">+850 W</text>

                    <!-- Runtime -->
                    <text id="runtime-svg" x="132" y="352" class="st14 left-align" fill="#5fb6ad">5h 30min</text>
                    <text x="132" y="368" class="st3 left-align" fill="#5fb6ad">RUNTIME TO 10% @18:30</text>

                    <!-- Inverter -> Battery Flow -->
                    <path d="M 155 250 L 96 250 Q 86 250 86 260 L 86 265" fill="none" stroke="#5fb6ad" stroke-width="2"
                        class="flow-line" />
                </svg>

                <!-- ===================== GRID SECTION ===================== -->
                <svg id="Grid" style="overflow: visible" x="3%" y="2.5%">
                    <!-- Grid Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" x="382" y="105" width="70" height="70" viewBox="0 0 24 24">
                        <path fill="#5490c2"
                            d="m8.28 5.45l-1.78-.9L7.76 2h8.47l1.27 2.55l-1.78.89L15 4H9l-.72 1.45M18.62 8h-4.53l-.79-3h-2.6l-.79 3H5.38L4.1 10.55l1.79.89l.73-1.44h10.76l.72 1.45l1.79-.89L18.62 8m-.85 14H15.7l-.24-.9L12 15.9l-3.47 5.2l-.23.9H6.23l2.89-11h2.07l-.36 1.35L12 14.1l1.16-1.75l-.35-1.35h2.07l2.89 11m-6.37-7l-.9-1.35l-1.18 4.48L11.4 15m3.28 3.12l-1.18-4.48l-.9 1.36l2.08 3.12Z" />
                    </svg>

                    <!-- Grid Power Box -->
                    <rect x="380" y="186" width="70" height="30" rx="4.5" ry="4.5" fill="none" stroke="#5490c2" />
                    <text id="grid-power-svg" x="415" y="203" class="st14 st8" fill="#5490c2">-520 W</text>

                    <!-- Grid Labels -->
                    <text x="415" y="235" class="st3" fill="#5490c2">Grid</text>

                    <!-- Daily Grid Import/Export -->
                    <text x="380" y="260" class="st3 left-align" fill="#5490c2">Daily Import</text>
                    <text id="daily-import-svg" x="380" y="275" class="st10 left-align" fill="#5490c2">2.1 kWh</text>
                    <text x="380" y="295" class="st3 left-align" fill="#5490c2">Daily Export</text>
                    <text id="daily-export-svg" x="380" y="310" class="st10 left-align" fill="#22c55e">4.8 kWh</text>

                    <!-- Inverter -> Grid Flow -->
                    <path d="M 215 178 L 308 178 Q 318 178 318 188 L 318 200 L 380 200" fill="none" stroke="#5490c2"
                        stroke-width="2" class="flow-line-reverse" />
                </svg>

                <!-- ===================== LOAD SECTION ===================== -->
                <svg id="Load" style="overflow: visible" x="3%" y="2.5%">
                    <!-- Essential Load Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" x="300" y="294" width="70" height="70" viewBox="0 0 24 24">
                        <path fill="#5fb6ad"
                            d="M5 20v-8H2l10-9l10 9h-3v8H5m7-14.31l-5 4.5V18h10v-7.81l-5-4.5M11.5 18v-4H9l3.5-7v4H15l-3.5 7Z" />
                    </svg>

                    <!-- Essential Load Box -->
                    <rect x="289" y="250" width="90" height="40" rx="4.5" ry="4.5" fill="none" stroke="#5fb6ad" />
                    <text id="essential-power-svg" x="334" y="273" class="st14 st8" fill="#5fb6ad">1860 W</text>

                    <!-- Essential Label -->
                    <text x="334" y="370" class="st3" fill="#5fb6ad">Essential</text>

                    <!-- Daily Essential -->
                    <text id="daily-essential-svg" x="334" y="385" class="st10" fill="#5fb6ad">12.4 kWh</text>

                    <!-- Inverter -> Essential Flow -->
                    <path d="M 215 250 L 289 250 L 289 265" fill="none" stroke="#5fb6ad" stroke-width="2"
                        class="flow-line" />
                </svg>

                <!-- ===================== NON-ESSENTIAL LOAD SECTION ===================== -->
                <svg id="NonEssential" style="overflow: visible" x="3%" y="2.5%">
                    <!-- Non-Essential Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" x="382" y="320" width="50" height="50" viewBox="0 0 24 24">
                        <path fill="#969696"
                            d="M 12 3 z z M 19 20 v -8 h 3 L 12 3 L 2 12 h 3 v 8 z M 12 5.7 l 5 4.5 V 18 H 7 v -7.8 z" />
                    </svg>

                    <!-- Non-Essential Power -->
                    <text id="nonessential-power-svg" x="407" y="380" class="st14 st8" fill="#969696">350 W</text>
                    <text x="407" y="395" class="st3" fill="#969696">Non-Essential</text>
                </svg>

            </svg>
        </div>
    </div>

    <script>
        // Demo data - replace with your API data
        const demoData = {
            pv1Power: 1250,
            pv2Power: 1180,
            pvTotal: 2430,
            dailySolar: 8.5,

            batterySOC: 70,
            batteryPower: 850, // positive = charging
            runtime: '5h 30min',

            gridPower: -520, // negative = exporting
            dailyImport: 2.1,
            dailyExport: 4.8,

            essentialPower: 1860,
            dailyEssential: 12.4,
            nonEssentialPower: 350,

            inverterPower: 2380,
            inverterCurrent: 10.5,
            autarky: 85,
            ratio: 92
        };

        // Update function
        function updateDisplay(data) {
            document.getElementById('pv1-power-svg').textContent = `${data.pv1Power} W`;
            document.getElementById('pv2-power-svg').textContent = `${data.pv2Power} W`;
            document.getElementById('pv-total-svg').textContent = `${data.pvTotal} W`;
            document.getElementById('daily-solar-svg').textContent = `${data.dailySolar} kWh`;

            document.getElementById('battery-soc-svg').textContent = `${data.batterySOC}%`;
            document.getElementById('battery-power-svg').textContent = data.batteryPower >= 0 ? `+${data.batteryPower} W` : `${data.batteryPower} W`;
            document.getElementById('runtime-svg').textContent = data.runtime;

            document.getElementById('grid-power-svg').textContent = `${data.gridPower} W`;
            document.getElementById('daily-import-svg').textContent = `${data.dailyImport} kWh`;
            document.getElementById('daily-export-svg').textContent = `${data.dailyExport} kWh`;

            document.getElementById('essential-power-svg').textContent = `${data.essentialPower} W`;
            document.getElementById('daily-essential-svg').textContent = `${data.dailyEssential} kWh`;
            document.getElementById('nonessential-power-svg').textContent = `${data.nonEssentialPower} W`;

            document.getElementById('inverter-power-svg').textContent = `${data.inverterPower} W`;
            document.getElementById('inverter-current-svg').textContent = `${data.inverterCurrent} A`;
            document.getElementById('autarky-svg').textContent = `${data.autarky}%`;
            document.getElementById('ratio-svg').textContent = `${data.ratio}%`;
        }

        // Initialize with demo data
        updateDisplay(demoData);
    </script>
</body>

</html>